## Моделювання комп'ютерних систем

## СПм-23-5, Лобач Яків Вадимович
### Лабораторна робота №**3**. Застосування обчислювальних засобів для оптимізації симуляційних моделей

### [Варіант 7] [Wolf Sheep Predation](https://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Wolf%20Sheep%20Predation.nlogo)

### Налаштування середовища BehaviorSearch:

**Обрана модель**:
<pre>
C:\ProgramFiles\NetLogo6.4.0\models\SampleModels\Biology\WolfSheepPredation.nlogo
</pre>

**Параметри моделі** (вкладка Model):
*Параметри та їх діапазони були автоматично визначені середовищем BehaviorSearch з вибраної моделі симуляції, для цього використано кнопку «Завантажити діапазони параметрів з інтерфейсу моделі»*:
<pre>
["initial-number-sheep" [0 1 200]]
["sheep-gain-from-food" [0 2 45]]
["sheep-reproduce" [2 1 15]]
["initial-number-wolves" [0 1 200]]
["wolf-gain-from-food" [0 1 90]]
["wolf-reproduce" [0 1 25]]
["grass-regrowth-time" [0 1 80]]
["show-energy?" true false]
["model-version" "sheep-wolves" "sheep-wolves-grass"]
</pre>
Останні два параметри були змінені на фіксовані:
<pre>
["show-energy?" false]
["model-version" "sheep-wolves-grass"]
</pre>

Використовувана **міра**:
Для цільової функції (функції адаптації) обрано **середнє значення популяції вовків** на полі:
<pre>
mean [count wolves] of patches
</pre>

Середня кількість вовків має враховуватися **в середньому** за весь період симуляції, що триває, наприклад, 400 тактів, починаючи з 0 такту.  
*Параметр "Measure if" зі значенням true означає, що беруться до уваги всі такти симуляції, а не частина з них. В деяких випадках може бути доцільно не враховувати перші такти через хаос на початку моделювання, як показано в прикладах документації BehaviorSearch.*  
Параметри "**Setup**" та "**Go**" вказують на відповідні процедури ініціалізації та виконання в логіці моделі (зазвичай вони так і називаються). BehaviorSearch запускає ці процедури замість користувача.  
Параметр зупинки за умовою ("**Stop if**") не використовувався.  
Загальний вигляд вкладки налаштувань параметрів моделі:  
![image](https://github.com/Avareco/Ksim/assets/31128616/893dafdb-a377-4008-bce8-a4ab246e1e61)

**Налаштування цільової функції** (вкладка Search Objective):  
Метою підбору параметрів моделі, що описує взаємодію вовків та овець, є **максимізація** середньої кількості вовків, що вказується через параметр "**Goal**" зі значенням **Maximize Fitness**. Тут важливо не просто середнє значення вовків у конкретний момент часу, а середнє за всю симуляцію (тривалість якої – 400 кроків, зазначено на попередній вкладці). У параметрі "**Collected measure**" для обліку значень обраного показника вказано **MEAN_ACROSS_STEPS**.  
Для уникнення викривлення результатів через випадкові значення, що використовуються в самій моделі, **кожна симуляція повторюється 10 разів**, а результуюче значення розраховується як **середнє арифметичне**.  
![image](https://github.com/Avareco/Ksim/assets/31128616/859b2e66-faeb-4175-8587-5f0b2f6ccc0f)

**Налаштування алгоритму пошуку** (вкладка Search Algorithm):  
*На цьому етапі була визначена модель, налаштовані її параметри (вказано, які з них незмінні, а які змінюються під час пошуку), а також обрана міра, що лежить в основі функції адаптації для оцінки якості перевіряємих варіантів рішень в BehaviorSearch.*  
У рамках лабораторної роботи використовуються два алгоритми: Випадковий пошук (**RandomSearch**) і Стандартний генетичний алгоритм (**StandardGA**).  
Для цих алгоритмів, які вирішують задачу пошуку оптимальних параметрів моделі, потрібно зазначити "**Evaluation limit**" (кількість ітерацій пошуку, для ГА – кількість поколінь) та "**Search Space Encoding Representation**" (метод кодування варіанта рішення). Універсального "кращого" методу кодування немає, варто експериментувати з тими, що підходять для вашої моделі.  
Параметр "**Use fitness caching**" впливає лише на продуктивність.  
Параметри, специфічні для генетичного алгоритму, можна використовувати за замовчуванням, якщо це не заважає отримати результат.  
Загальний вигляд вкладки налаштувань алгоритму пошуку:  
![image](https://github.com/Avareco/Ksim/assets/31128616/4be8fdc1-bccb-410e-922f-67ed5a8a32d5)

<br>

### Результати використання BehaviorSearch:

Результат пошуку параметрів моделі симуляції, використовуючи **генетичний алгоритм**:  
![image](https://github.com/Avareco/Ksim/assets/31128616/4d11b256-7f80-4ddb-b285-2914795b92bd)

Результат пошуку параметрів моделі симуляції, використовуючи **випадковий пошук**:  
![image](https://github.com/Avareco/Ksim/assets/31128616/56952bb0-604f-49b5-b154-9bc146f5c965)
